Replit Prompt (paste this)

You are working with two codebases already present in this repo:
	•	Reference implementation: reference/couplestherapy-main/mobile/src/screens/client/*
	•	Target app: client/screens/* (ALEIC)

Goal: Make ALEIC’s screen content/UX match the reference app’s “couplestherapy-main” mobile screens (same wording, same question sets, same flows), specifically:
	1.	Love Language Quiz
	2.	Date Night Generator (AI/Perplexity-powered)
…and then ensure other overlapping tools screens match the reference copy/structure where they exist.

A) Love Language Quiz: make ALEIC match the reference screen content
	1.	Use reference/couplestherapy-main/mobile/src/screens/client/LoveLanguageQuizScreen.tsx as the source of truth for:
	•	the questions array (text + options)
	•	quiz flow (start screen, question progression, results view)
	•	results breakdown labels and ordering
	2.	Update ALEIC’s client/screens/couple/LoveLanguageQuizScreen.tsx so the visible text and the quiz behavior match the reference.
	•	Keep ALEIC’s themed components (ThemedText, Card, Button, etc.) but the copy and logic must match the reference.
	•	Ensure results show:
	•	Primary Love Language
	•	Secondary Love Language
	•	Breakdown rows (Words of Affirmation, Quality Time, Receiving Gifts, Acts of Service, Physical Touch)
	3.	Confirm navigation route stays working:
	•	client/navigation/RootStackNavigator.tsx already routes LoveLanguageQuiz to LoveLanguageQuizScreen. Keep that.

B) Date Night Generator: implement the same screen as reference, but powered by Perplexity via Supabase Edge Function

Reference screen:
	•	reference/couplestherapy-main/mobile/src/screens/client/DateNightScreen.tsx
It posts to /api/perplexity/date-night and shows suggestions.

ALEIC already contains a Supabase Edge Function:
	•	supabase/functions/ai-date-night/index.ts
and shared Perplexity helper:
	•	supabase/functions/_shared/perplexity.ts

Implement a proper Date Night Generator screen in ALEIC that matches the reference UX (interest grid, location input, distance selector, generate button, loading state, results cards), but calls the Edge Function instead of a missing Express route.

Steps:
	1.	Create a new screen file:

	•	client/screens/couple/DateNightScreen.tsx
Make its UI match the reference screen structure and wording:
	•	Title: “Date Night Generator”
	•	Subtitle: “Get AI-powered date ideas tailored to your preferences”
	•	Interest multi-select grid with emojis + labels (same list as reference)
	•	Location input (“Enter city or zip code”)
	•	Distance selector buttons [5, 10, 15, 20, 30] miles
	•	“✨ Generate Date Ideas” button
	•	Loading card text: “Generating personalized date ideas…”
	•	Results list with title/description and optional location/cost display if returned

	2.	Wire it to Perplexity using Supabase Functions invoke:

	•	Import supabase from client/lib/supabase
	•	Call:
await supabase.functions.invoke("ai-date-night", { body: payload })

	3.	IMPORTANT: The existing Edge Function expects this payload:

{
  interests: string[],
  time: string,
  zipCode: string,
  travelDistance: string,
  activityLocation: string,
  price: string,
  participants: string,
  energy: string
}

But the reference UI only collects interests + location + distance.
So map inputs like this:
	•	interests -> selected interests
	•	zipCode -> user’s location input
	•	travelDistance -> ${distance} miles
	•	time -> “evening”
	•	activityLocation -> “outdoors or indoors”
	•	price -> “any”
	•	participants -> “couple”
	•	energy -> “medium”

(These defaults are fine for now and preserve the reference UX.)
	4.	Normalize the response into the reference shape:
The Edge Function likely returns structured ideas, but if it returns text or a differently-shaped JSON, parse it into:

type DateIdea = { title: string; description: string; location?: string; estimated_cost?: string }

If response is a string, attempt to JSON-parse; if that fails, split into bullet-like blocks and create best-effort title/description pairs.
	5.	Add navigation route:

	•	In client/navigation/RootStackNavigator.tsx:
	•	Add DateNight: undefined to the param list
	•	Register the screen component under that name

	6.	Add an entry point button:

	•	In client/screens/couple/ActivitiesScreen.tsx (or wherever ALEIC lists tools),
add a tile/button that navigates to "DateNight".

	7.	Remove hardcoded date night suggestions from client/screens/couple/PlanScreen.tsx OR leave them, but ensure the “real” generator exists and is accessible.
Preferred:

	•	Keep PlanScreen’s saved date nights list (since it’s valuable),
	•	Replace “Ideas for You” hardcoded suggestions with a single card/button:
“Open Date Night Generator” -> navigates to DateNight
This keeps Plan tidy and avoids duplicate “generator” logic.

C) Align other overlapping screens’ copy/structure

Compare these two directories and align wording + sections wherever screens overlap by name/topic:
	•	reference/couplestherapy-main/mobile/src/screens/client/
	•	client/screens/tools/ and client/screens/couple/

For any screen that exists in both, update ALEIC’s content text (headings, helper text, prompts, button labels) to match the reference app as closely as possible while keeping ALEIC’s themed components.

D) Guardrails
	•	Do NOT use AsyncStorage for app content persistence (only acceptable for auth storage adapter on web as already implemented).
	•	Prefer Supabase tables/services already in client/services/* for saved items.
	•	All new code must TypeScript compile.
	•	Keep styles consistent with ALEIC theme system.

After implementing:
	•	Run TypeScript check/build.
	•	Ensure navigation to LoveLanguageQuiz and DateNight works.
	•	Ensure DateNight generates ideas via the Supabase Edge Function and renders results.
Commit the changes with a clear message.

⸻

If you want the “extra matching” version too (fast win)

If you also want Love Map Quiz to match exactly, tell Replit to do the same treatment using:
	•	reference/couplestherapy-main/mobile/src/screens/client/LoveMapQuizScreen.tsx
to update:
	•	client/screens/tools/LoveMapQuizScreen.tsx

(You already have that screen in ALEIC, it just likely needs the reference copy/flow.)

If you paste that prompt into Replit, it will have very concrete targets (file paths + exact behaviors) and should stop it from hand-waving or inventing new UX.
You’re basically at “it runs” ✅, but a few things still need tightening so it’s truly **production-grade** (and so your PORT_PLAN isn’t accidentally lying to Future You).

Here’s what I’d change next, in priority order.

---

## 1) Fix PORT_PLAN inaccuracies (these matter)

Your updated PORT_PLAN claims things like:

* **CalendarScreen = Local storage**
* **Journal = AsyncStorage**
* **Gratitude = AsyncStorage**
* **LoveLanguageQuiz = Local**
* **MessagesScreen = “DONE” but Supabase table = “-”**
* **Attachment tables named `attachment_results`** (but your schema uses `Couples_attachment_*`)

That’s a mismatch with your actual Supabase setup (you have rich `Couples_*` tables already).

### What to change

Update PORT_PLAN so it points to the **real tables you already have**, for example:

* Calendar → `Couples_calendar_events`
* Journal → `Couples_journal_entries` (+ attachments/shares if used)
* Gratitude → `Couples_gratitude_logs`
* Messages → `Couples_messages`
* Voice memos → `Couples_voice_memos` (or `voice_memos`, pick one canonical)
* Attachment assessment/results → `Couples_attachment_*`
* Enneagram → `Couples_enneagram_*`
* IFS → `Couples_ifs_*` or your `ifs_*` set (pick one)

If the app is still using AsyncStorage/local for some of these, that’s fine, but then the claim “full Supabase persistence” needs to be corrected.

---

## 2) Canonicalize your data model (you have duplicates)

You currently have two “universes” of tables:

* `Couples_*` (rich, module-specific, quoted names)
* generic lowercase tables (`goals`, `rituals`, `voice_memos`, `module_results`, etc.)

This is **not a crisis**, but you need a decision:

* either the app uses **Couples_* everywhere**, or
* it uses **lowercase tables everywhere**, or
* you create **views** so the app can use lowercase names while data stays in `Couples_*`.

### Recommended quick fix (views)

Create views so your app never has to quote `"Couples_messages"`:

```sql
create or replace view public.couples_messages as
select * from public."Couples_messages";

create or replace view public.couples_calendar_events as
select * from public."Couples_calendar_events";

create or replace view public.couples_gratitude_logs as
select * from public."Couples_gratitude_logs";

create or replace view public.couples_journal_entries as
select * from public."Couples_journal_entries";
```

Then point the app at `public.couples_messages` etc.

This reduces bugs and makes SQL/RLS sanity easier.

---

## 3) Ensure RLS exists on the big Couples_* tables (not just messages)

Right now we hardened:

* `couple_members`
* `"Couples_messages"`
* `"Couples_conversations"`

But your app will also hit:

* `"Couples_calendar_events"`
* `"Couples_gratitude_logs"`
* `"Couples_journal_entries"`
* `"Couples_shared_goals"`
* `"Couples_voice_memos"`
* `"Couples_demon_dialogues"`
* `"Couples_enneagram_*"`
* `"Couples_attachment_*"`

If any of these don’t have RLS policies, you either get:

* “permission denied” surprises, or
* silent overexposure (worse)

### Minimum RLS baseline (pattern)

For any table with `couple_id`, you want:

* SELECT: member OR therapist
* INSERT: member and (creator_id/user_id = auth.uid()) if that column exists
* UPDATE: member OR therapist (or tighter)
* DELETE: member only (usually)

If you want, I’ll generate a single “apply RLS baseline to all Couples_* tables with couple_id” script, but it depends on which columns each table has (creator/user_id).

---

## 4) Replit security scanner warnings: actually fix them

You’ve got two categories of warnings:

### A) Outdated dependencies

* `node-forge@1.3.1`
* `tar@7.5.2`
* `glob@10.4.5`
* `qs@6.13.0`

These are usually transitive dependencies. You can address by:

* running `npm audit fix` (carefully)
* updating top-level deps that pull them in

**Do this before App Store submission**, because security review and enterprise customers will care.

### B) SQL injection warnings

“Detected user input used to manually construct a SQL string” is a big one.

That means somewhere in your server code you have something like:

```js
`select * from table where x = '${userInput}'`
```

Fix by using:

* parameterized queries (`$1`, `$2`, etc.) or
* Supabase query builder
* an ORM if you must

This is not optional long-term.

---

## 5) Secrets hygiene (Replit “gitleaks” key detection)

Make sure **NO Supabase service keys** are referenced in frontend code.

Rules:

* `EXPO_PUBLIC_*` is okay for anon key only
* Service role keys must be server-only
* Never ship service keys to Expo client

If you have `SUPABASE_SERVICE_ROLE_KEY` in any client file, remove immediately.

---

## 6) Expo / mobile readiness checklist (App Store reality)

Even if it runs in Expo Go, App Store wants polish:

* App icons / splash (you already updated)
* `app.json`/`app.config`:

  * correct `bundleIdentifier` (iOS)
  * permissions strings (microphone for voice memos)
* If using audio recording:

  * iOS `NSMicrophoneUsageDescription` must be set
* If using notifications:

  * push setup and permission prompts

---

## 7) Realtime: enable the right tables

You should enable realtime for:

* `"Couples_messages"` (for chat)
  Optionally:
* goals/checkins if you want live updates

---

# The quickest “what should I do now?” answer

1. **Correct PORT_PLAN.md** so it matches actual storage (Supabase vs local) and real table names
2. Decide on canonical tables and ideally add **views** to avoid quoted `Couples_*` usage
3. Add **RLS baseline** for the other Couples_* tables your app uses
4. Fix the **SQL injection warnings** in server code
5. Update vulnerable dependencies via audit/update

If you paste the filenames where the SQL injection warnings point (Semgrep usually tells you the file + line), I’ll give you exact parameterized replacements.

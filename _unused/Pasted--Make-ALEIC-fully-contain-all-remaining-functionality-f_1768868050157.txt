
Make ALEIC fully contain all remaining functionality from couplestherapy-main while preserving ALEIC’s current UI structure, navigation, and Supabase-backed architecture.
Do not redo work that already exists.

⸻

1) Reference layout (already exists, do not modify)

The repo already contains:
	•	reference/couplestherapy-main/
	•	reference/aleicapp-main/

These folders are read-only.
Do not change, delete, or move files inside reference/.

ALEIC is the active codebase.

⸻

2) Run a focused diff and produce a completion checklist

Compare:
	•	reference/couplestherapy-main/mobile/src/screens/
	•	against client/screens/ in ALEIC

Exclude features that are already covered under different screen names or merged flows.

Produce PORT_PLAN.md that lists:
	•	Screens/modules still missing in ALEIC
	•	Existing ALEIC screens that already cover old features (with mapping notes)
	•	Navigation routes that need to be added
	•	Supabase tables each missing module should use (use existing tables only)
	•	Any service helpers/hooks required to support the new screens

This plan should reflect only remaining work, not already-completed features.

⸻

3) Implement only the remaining missing modules

Add the following missing modules to client/screens and wire them into existing navigation so they are reachable from the UI (no orphan screens):

Attachment
	•	AttachmentAssessmentScreen
	•	AttachmentStyleScreen

Enneagram
	•	EnneagramAssessmentScreen
	•	EnneagramScreen

IFS
	•	IFSIntroScreen
	•	IFSScreen

Other couples tools
	•	IntimacyMappingScreen
	•	LoveMapQuizScreen
	•	MeditationLibraryScreen
	•	ParentingPartnersScreen
	•	FinancialToolkitScreen
	•	ValuesVisionScreen
	•	SharedGoalsScreen
	•	DemonDialoguesScreen

Communication
	•	VoiceMemosScreen
	•	TherapistMessagesScreen

Do not rename or refactor existing working screens unless necessary to expose these modules.

⸻

4) Supabase usage (already complete — do not recreate)

Supabase is already fully implemented (schema, RLS, storage, realtime).

Do NOT create new tables or redesign schema.
Use existing tables as the source of truth:
	•	Chat: public."Couples_messages"
	•	Conversations/exercises:
public."Couples_conversations", public.hold_me_tight_conversations,
public."Couples_echo_sessions", public."Couples_echo_turns"
	•	Attachment: public."Couples_attachment_*"
	•	Enneagram: public."Couples_enneagram_*"
	•	Love Maps: public."Couples_love_map_*"
	•	IFS: public.ifs_* and public."Couples_ifs_*"
	•	Journal & gratitude:
public."Couples_journal_entries", public."Couples_gratitude_logs"
	•	Rituals & goals:
public."Couples_rituals", public."Couples_shared_goals"
	•	Calendar: public."Couples_calendar_events"
	•	Voice memos:
public."Couples_voice_memos" + Storage bucket voice-memos
	•	Invitations & membership: use existing ALEIC invite + couple membership tables

Only create migrations if a required table truly does not exist.

⸻

5) Services layer (make features actually persist)

For each added module:
	•	Use Supabase queries directly (no mock or local state)
	•	Reuse or add service helpers for:
	•	Data fetch/save
	•	Realtime subscriptions (chat only)
	•	Storage uploads/download URLs (voice memos)

Ensure new screens are fully functional, not just UI shells.

⸻

6) Realtime usage (minimal)

Use Supabase realtime only for:
	•	public."Couples_messages" (couple + therapist chat)

Do not enable realtime for other tables unless the UX requires live collaboration.

⸻

7) Guardrails
	•	Small, logical commits per module
	•	After each module: TypeScript builds and app launches
	•	No TODO stubs for core flows (auth, navigation, saving/loading)
	•	Do not delete or simplify existing functionality to make builds pass
	•	Keep reference/ untouched at all times

⸻

8) Deliverables
	•	PORT_PLAN.md (focused diff + remaining work checklist)
	•	All missing modules implemented and reachable in the UI
	•	Existing Supabase tables used correctly
	•	Realtime chat working
	•	App builds and runs with no regressions
